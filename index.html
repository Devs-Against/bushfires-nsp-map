<!DOCTYPE html>
<html>
<head>
	<title>Safer Places Map</title>
	<link rel="stylesheet" type="text/css" href="./style.css">
	 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
</head>
<body id="body" >
	<div id="mapid"></div>



	<script type="module">
			function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition();
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

document.getElementById("body").onload = function() {navigator.geolocation.getCurrentPosition(createMap)
}

		const MAP_TOKEN = "pk.eyJ1IjoiZGV2cy1hZ2FpbnN0IiwiYSI6ImNrMzBkcGdnazA3bG0zZm80anA5Y2J0cDMifQ.55S0XK00M8AmA3zOKubLVQ"
		
		function createMap(position){
		var mymap = L.map('mapid').setView([-33.9973032619999,150.882539342 ], 14);


			L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + MAP_TOKEN, {
    
    			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    			
    			maxZoom: 18,
			    
			    id: 'mapbox.streets',
			    
			    accessToken: 'your.mapbox.access.token'
}).addTo(mymap);
		var marker = L.marker([-33.9973032619999,150.882539342, ]).addTo(mymap);
		var googleQuery = `https://www.google.com/maps/dir/${position.coords.latitude},${position.coords.longitude}/-33.9973032619999,150.882539342/@-28.9288343,152.1011983`
		marker.bindPopup('<a href="'+ googleQuery +' " target="_blank">Plan Route</a><p>TESTSINGSIGN</p>')
		
		}
	</script>
</body>
</html>